<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combat Ability Package - Documentation</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #7c3aed;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --bg-color: #0f172a;
            --surface-color: #1e293b;
            --text-color: #e2e8f0;
            --text-muted: #94a3b8;
            --border-color: #334155;
            --code-bg: #0d1117;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 60px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        header p {
            font-size: 1.3em;
            opacity: 0.9;
        }

        nav {
            background-color: var(--surface-color);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 2px solid var(--border-color);
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 30px;
        }

        nav a {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
            padding: 5px 10px;
            border-radius: 4px;
        }

        nav a:hover {
            color: var(--primary-color);
            background-color: rgba(37, 99, 235, 0.1);
        }

        .content {
            padding: 40px 0;
        }

        section {
            margin-bottom: 60px;
            background-color: var(--surface-color);
            padding: 30px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        h2 {
            color: var(--primary-color);
            font-size: 2.5em;
            margin-bottom: 20px;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
        }

        h3 {
            color: var(--secondary-color);
            font-size: 1.8em;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        h4 {
            color: var(--text-color);
            font-size: 1.3em;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        p {
            margin-bottom: 15px;
            color: var(--text-muted);
        }

        .card {
            background-color: var(--code-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 20px;
            margin: 20px 0;
        }

        .card h4 {
            color: var(--success-color);
            margin-top: 0;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background-color: var(--code-bg);
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            border-radius: 4px;
        }

        .feature-card h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        code {
            background-color: var(--code-bg);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: var(--success-color);
            font-size: 0.9em;
        }

        pre {
            background-color: var(--code-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 20px;
            overflow-x: auto;
            margin: 20px 0;
        }

        pre code {
            background: none;
            padding: 0;
            color: var(--text-color);
            font-size: 0.95em;
            line-height: 1.5;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin-right: 8px;
        }

        .badge-required {
            background-color: var(--danger-color);
            color: white;
        }

        .badge-optional {
            background-color: var(--warning-color);
            color: white;
        }

        .badge-new {
            background-color: var(--success-color);
            color: white;
        }

        .badge-core {
            background-color: var(--primary-color);
            color: white;
        }

        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
            color: var(--text-muted);
        }

        li {
            margin-bottom: 8px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid var(--border-color);
        }

        th {
            background-color: var(--code-bg);
            color: var(--primary-color);
            font-weight: 600;
        }

        tr:nth-child(even) {
            background-color: rgba(255, 255, 255, 0.02);
        }

        .comparison-table {
            margin: 30px 0;
        }

        .comparison-table th {
            text-align: center;
        }

        .comparison-table td:first-child {
            font-weight: 600;
            color: var(--text-color);
        }

        .check {
            color: var(--success-color);
            font-weight: bold;
        }

        .cross {
            color: var(--danger-color);
            font-weight: bold;
        }

        .warning-box {
            background-color: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--warning-color);
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .info-box {
            background-color: rgba(37, 99, 235, 0.1);
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .success-box {
            background-color: rgba(16, 185, 129, 0.1);
            border-left: 4px solid var(--success-color);
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        footer {
            background-color: var(--surface-color);
            text-align: center;
            padding: 30px 0;
            margin-top: 60px;
            border-top: 2px solid var(--border-color);
        }

        .architecture-diagram {
            background-color: var(--code-bg);
            padding: 30px;
            border-radius: 8px;
            font-family: monospace;
            margin: 20px 0;
            overflow-x: auto;
        }

        .workflow-step {
            background-color: var(--code-bg);
            border-left: 4px solid var(--secondary-color);
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .workflow-step h5 {
            color: var(--secondary-color);
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }

            nav ul {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }

            h2 {
                font-size: 2em;
            }

            h3 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>‚öîÔ∏è Combat Ability Package</h1>
            <p>Advanced Combat Effects for YAAS (Yet Another Ability System)</p>
        </div>
    </header>

    <nav>
        <div class="container">
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#core-scripts">Core Scripts</a></li>
                <li><a href="#effects">Effects</a></li>
                <li><a href="#quickstart">Quick Start</a></li>
                <li><a href="#comparison">Comparison</a></li>
                <li><a href="#examples">Examples</a></li>
                <li><a href="#weapons">Weapon System</a></li>
                <li><a href="#api">API Reference</a></li>
            </ul>
        </div>
    </nav>

    <div class="container content">
        <!-- OVERVIEW -->
        <section id="overview">
            <h2>üìñ Overview</h2>

            <p>The Combat Ability Package provides a comprehensive, data-driven combat system built on top of YAAS (Yet Another Ability System). It offers both simple and advanced combat implementations with zero coupling between components.</p>

            <div class="success-box">
                <strong>‚ú® Key Philosophy:</strong> Pure effects-based architecture. No controllers. No managers. No coupling. Just ScriptableObjects and AbilityEffects.
            </div>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üéØ Zero Coupling</h4>
                    <p>Effects are completely self-contained with no dependencies on controllers or managers.</p>
                </div>
                <div class="feature-card">
                    <h4>üìä Data-Driven</h4>
                    <p>Create attacks as ScriptableObject assets without writing code.</p>
                </div>
                <div class="feature-card">
                    <h4>üîß Modular</h4>
                    <p>Mix and match effects. Use simple or advanced systems as needed.</p>
                </div>
                <div class="feature-card">
                    <h4>üöÄ YAAS Integration</h4>
                    <p>Built-in cooldowns, requirements, consumables, and UI support.</p>
                </div>
            </div>

            <h3>Architecture</h3>
            <div class="architecture-diagram">
<pre>
AttackData.asset (ScriptableObject)
    ‚Üì defines parameters
AbilityEffect (MeleeAttackEffect_v2, ComboEffect, etc.)
    ‚Üì executes attack logic
AbilityDef (YAAS)
    ‚Üì wraps with cooldowns/requirements
AbilityCaster (YAAS)
    ‚Üì activates on input
Pure Effect Execution ‚ú®
</pre>
            </div>
        </section>

        <!-- CORE SCRIPTS -->
        <section id="core-scripts">
            <h2>üîß Core Scripts</h2>

            <div class="card">
                <h4><span class="badge badge-core">Core</span> AttackData.cs</h4>
                <p>ScriptableObject that defines complete attack parameters:</p>
                <ul>
                    <li><strong>Damage & Timing:</strong> Base damage, duration, hitbox windows</li>
                    <li><strong>Movement:</strong> Lunge distance, speed multipliers</li>
                    <li><strong>Hitbox:</strong> Shape (sphere/box/capsule), size, offset</li>
                    <li><strong>Animation:</strong> Trigger names, cross-fade times</li>
                    <li><strong>Effects:</strong> Visual effects, audio clips</li>
                    <li><strong>Combos:</strong> Chain to next attack, branching paths</li>
                </ul>

                <div class="info-box">
                    <strong>Menu Path:</strong> Create ‚Üí Ratchet Combat ‚Üí Attack Data
                </div>
            </div>

            <div class="card">
                <h4><span class="badge badge-core">Core</span> ComboChain.cs</h4>
                <p>ScriptableObject defining combo sequences:</p>
                <ul>
                    <li>Links multiple AttackData in sequence</li>
                    <li>Damage scaling curve per combo step</li>
                    <li>Finisher attacks after N hits</li>
                    <li>Combo branching based on input</li>
                    <li>Auto-reset timing</li>
                </ul>

                <div class="info-box">
                    <strong>Menu Path:</strong> Create ‚Üí Ratchet Combat ‚Üí Combo Chain
                </div>
            </div>

            <div class="card">
                <h4><span class="badge badge-core">Core</span> ComboTracker.cs</h4>
                <p>MonoBehaviour component for tracking combo state (requires AbilityCaster):</p>
                <ul>
                    <li>Tracks combo count per combo chain</li>
                    <li>Inspector debugging with visible combo state</li>
                    <li>AI-compatible (tracks hits, not input)</li>
                    <li>Supports multiple combos per character</li>
                    <li>Backward-compatible static helpers included</li>
                </ul>

                <pre><code>// Instance usage (preferred)
ComboTracker tracker = GetComponent&lt;ComboTracker&gt;();
int count = tracker.GetComboCount("wrench_basic");
tracker.IncrementCombo("wrench_basic");
tracker.ResetCombo("wrench_basic");

// Static usage (backward compatibility)
int count = ComboTracker.GetComboCount(caster, "wrench_basic");
ComboTracker.IncrementCombo(caster, "wrench_basic");
ComboTracker.ResetCombo(caster, "wrench_basic");</code></pre>
            </div>

            <div class="card">
                <h4><span class="badge badge-core">Core</span> CombatSpawnPoint.cs</h4>
                <p>Marker component for spawn points in character models:</p>
                <ul>
                    <li>Mark transforms like "WrenchTip", "WrenchBase"</li>
                    <li>Effects find spawn points by name</li>
                    <li>Used for hitboxes, effects, projectile spawns</li>
                </ul>
            </div>
        </section>

        <!-- EFFECTS -->
        <section id="effects">
            <h2>‚ú® Combat Effects</h2>

            <h3>Simple Effects</h3>

            <div class="card">
                <h4><span class="badge badge-optional">Simple</span> CreateMeleeEffect.cs</h4>
                <p><strong>Use When:</strong> Need basic instant melee damage</p>

                <table>
                    <tr>
                        <th>Feature</th>
                        <th>Value</th>
                    </tr>
                    <tr>
                        <td>Damage Type</td>
                        <td>Instant sphere overlap</td>
                    </tr>
                    <tr>
                        <td>Health System</td>
                        <td>BosoHealth</td>
                    </tr>
                    <tr>
                        <td>Timing</td>
                        <td>None (instant)</td>
                    </tr>
                    <tr>
                        <td>Complexity</td>
                        <td>Low</td>
                    </tr>
                </table>

                <div class="info-box">
                    <strong>Menu Path:</strong> Create ‚Üí YAAS ‚Üí Combat ‚Üí Melee Effect
                </div>
            </div>

            <h3>Advanced Effects</h3>

            <div class="card">
                <h4><span class="badge badge-new">Advanced</span> MeleeAttackEffect_v2.cs</h4>
                <p><strong>Use When:</strong> Need full attack timing and combo support</p>

                <p><strong>Features:</strong></p>
                <ul>
                    <li>Uses AttackData ScriptableObjects</li>
                    <li>Attack duration with configurable hitbox windows</li>
                    <li>Multiple hitbox shapes (sphere, box, capsule)</li>
                    <li>Animation, audio, trail integration</li>
                    <li>Optional combo tracking</li>
                    <li>Multi-hit prevention</li>
                    <li>Uses IDamageable interface (no external dependencies)</li>
                </ul>

                <pre><code>// Configuration
Attack Data: [YourAttackData]
Hitbox Spawn Point Name: "WrenchTip"
Hit Layers: Enemy
Prevent Multi Hit: ‚úì
Track Combo: ‚úì
Combo State Key: "wrench_basic"</code></pre>

                <div class="info-box">
                    <strong>Menu Path:</strong> Create ‚Üí Ratchet Combat ‚Üí Effects ‚Üí Melee Attack v2
                </div>
            </div>

            <div class="card">
                <h4><span class="badge badge-new">Advanced</span> ComboEffect.cs</h4>
                <p><strong>Use When:</strong> Need auto-chaining combo system</p>

                <p><strong>Features:</strong></p>
                <ul>
                    <li>Uses ComboChain ScriptableObject</li>
                    <li>Automatically chains attacks on repeated input</li>
                    <li>Tracks combo count internally</li>
                    <li>Damage scaling per combo step</li>
                    <li>Auto-reset on timeout</li>
                    <li>No controller needed - pure effect</li>
                </ul>

                <pre><code>// Configuration
Combo Chain: [WrenchBasicCombo]
Hitbox Spawn Point Name: "WrenchTip"
Hit Layers: Enemy
Prevent Multi Hit: ‚úì</code></pre>

                <div class="info-box">
                    <strong>Menu Path:</strong> Create ‚Üí Ratchet Combat ‚Üí Effects ‚Üí Combo
                </div>
            </div>

            <div class="card">
                <h4><span class="badge badge-new">Advanced</span> ChargeAttackEffect_v2.cs</h4>
                <p><strong>Use When:</strong> Need charge-and-release attacks (like Hyperstrike)</p>

                <p><strong>Features:</strong></p>
                <ul>
                    <li>Charge detection with visual/audio feedback</li>
                    <li>Detects input directly from WrenchInput</li>
                    <li>Configurable charge time and minimum threshold</li>
                    <li>Executes AttackData on release</li>
                    <li>Self-contained - no controller dependency</li>
                </ul>

                <pre><code>// Configuration
Charge Time: 1.5
Charged Attack: [HyperstrikeAttack]
Minimum Charge Percent: 0.8
Button To Hold: "hyperstrike"
Charge Effect Prefab: [GlowEffect]</code></pre>

                <div class="info-box">
                    <strong>Menu Path:</strong> Create ‚Üí Ratchet Combat ‚Üí Effects ‚Üí Charge Attack v2
                </div>
            </div>

            <div class="card">
                <h4><span class="badge badge-new">Advanced</span> AOEAttackEffect_v2.cs</h4>
                <p><strong>Use When:</strong> Need area-of-effect attacks (like Comet Strike)</p>

                <p><strong>Features:</strong></p>
                <ul>
                    <li>Multiple AOE shapes (sphere, box, cylinder)</li>
                    <li>Configurable damage, radius, layers</li>
                    <li>Knockback support with directional force</li>
                    <li>Impact effects and audio</li>
                    <li>Delay support for ground pound timing</li>
                </ul>

                <pre><code>// Configuration
Damage: 40
Radius: 4
Shape: Sphere
Hit Layers: Enemy
Apply Knockback: ‚úì
Knockback Force: 10
Impact Effect Prefab: [Explosion]</code></pre>

                <div class="info-box">
                    <strong>Menu Path:</strong> Create ‚Üí Ratchet Combat ‚Üí Effects ‚Üí AOE Attack v2
                </div>
            </div>
        </section>

        <!-- COMPARISON -->
        <section id="comparison">
            <h2>‚öñÔ∏è Effect Comparison</h2>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>CreateMeleeEffect</th>
                        <th>MeleeAttackEffect_v2</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Complexity</td>
                        <td>Simple</td>
                        <td>Advanced</td>
                    </tr>
                    <tr>
                        <td>Uses AttackData</td>
                        <td><span class="cross">‚úó</span></td>
                        <td><span class="check">‚úì</span></td>
                    </tr>
                    <tr>
                        <td>Attack Duration</td>
                        <td><span class="cross">‚úó</span></td>
                        <td><span class="check">‚úì</span></td>
                    </tr>
                    <tr>
                        <td>Hitbox Timing</td>
                        <td>Instant</td>
                        <td>Configurable windows</td>
                    </tr>
                    <tr>
                        <td>Hitbox Shapes</td>
                        <td>Sphere only</td>
                        <td>Sphere, Box, Capsule</td>
                    </tr>
                    <tr>
                        <td>Combo Support</td>
                        <td><span class="cross">‚úó</span></td>
                        <td><span class="check">‚úì</span></td>
                    </tr>
                    <tr>
                        <td>Animation Integration</td>
                        <td><span class="cross">‚úó</span></td>
                        <td><span class="check">‚úì</span></td>
                    </tr>
                    <tr>
                        <td>Trail Effects</td>
                        <td><span class="cross">‚úó</span></td>
                        <td><span class="check">‚úì</span></td>
                    </tr>
                    <tr>
                        <td>Health System</td>
                        <td>BosoHealth</td>
                        <td>IDamageable</td>
                    </tr>
                    <tr>
                        <td>Best For</td>
                        <td>Quick prototypes</td>
                        <td>Production combat</td>
                    </tr>
                </tbody>
            </table>

            <h3>When to Use Each</h3>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Use CreateMeleeEffect When:</h4>
                    <ul>
                        <li>Prototyping quickly</li>
                        <li>Simple instant damage needed</li>
                        <li>Using BosoHealth system</li>
                        <li>Don't need timing control</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>Use MeleeAttackEffect_v2 When:</h4>
                    <ul>
                        <li>Building Ratchet & Clank style combat</li>
                        <li>Need attack duration/timing</li>
                        <li>Want combo system</li>
                        <li>Need animations/effects</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- QUICK START -->
        <section id="quickstart">
            <h2>üöÄ Quick Start</h2>

            <h3>Option 1: Simple Melee (5 Minutes)</h3>

            <div class="workflow-step">
                <h5>Step 1: Create Effect</h5>
                <p>Right-click ‚Üí Create ‚Üí YAAS ‚Üí Combat ‚Üí Melee Effect</p>
                <pre><code>Base Damage: 10
Radius: 1.5
Overlap Mask: Enemy</code></pre>
            </div>

            <div class="workflow-step">
                <h5>Step 2: Create Ability</h5>
                <p>Right-click ‚Üí Create ‚Üí YAAS ‚Üí AbilityDef</p>
                <pre><code>Ability Effects: [Your MeleeEffect]
Ability Cooldown: 0.3</code></pre>
            </div>

            <div class="workflow-step">
                <h5>Step 3: Add to Character</h5>
                <p>Add to AbilityCaster ‚Üí Starting Abilities</p>
            </div>

            <div class="workflow-step">
                <h5>Step 4: Wire Input</h5>
                <pre><code>if (input.attackPressed)
{
    caster.TryUseAbility(meleeAbility);
}</code></pre>
            </div>

            <div class="success-box">
                <strong>‚úÖ Done!</strong> You now have a working melee attack.
            </div>

            <h3>Option 2: Advanced Combo System (15 Minutes)</h3>

            <div class="workflow-step">
                <h5>Step 1: Create AttackData Assets</h5>
                <p>Right-click ‚Üí Create ‚Üí Ratchet Combat ‚Üí Attack Data (√ó4)</p>
                <pre><code>Swing1.asset:
  Damage: 10
  Attack Duration: 0.4
  Hitbox Start Time: 0.2
  Hitbox End Time: 0.8
  Animation Trigger: "Swing1"

Swing2.asset:
  Damage: 12
  Duration: 0.4
  ...

Swing3.asset:
  Damage: 15
  Duration: 0.45
  ...

Swing4.asset:
  Damage: 25
  Duration: 0.6
  ...</code></pre>
            </div>

            <div class="workflow-step">
                <h5>Step 2: Create ComboChain</h5>
                <p>Right-click ‚Üí Create ‚Üí Ratchet Combat ‚Üí Combo Chain</p>
                <pre><code>Combo ID: "wrench_basic"
Attacks: [Swing1, Swing2, Swing3, Swing4]
Global Combo Window: 0.8
Damage Scaling: Linear 1.0 ‚Üí 1.5
Reset Time: 2.0</code></pre>
            </div>

            <div class="workflow-step">
                <h5>Step 3: Create ComboEffect</h5>
                <p>Right-click ‚Üí Create ‚Üí Ratchet Combat ‚Üí Effects ‚Üí Combo</p>
                <pre><code>Combo Chain: [WrenchBasicCombo]
Hitbox Spawn Point: "WrenchTip"
Hit Layers: Enemy</code></pre>
            </div>

            <div class="workflow-step">
                <h5>Step 4: Create AbilityDef</h5>
                <pre><code>Ability Effects: [ComboEffect]
Cooldown: 0.3</code></pre>
            </div>

            <div class="workflow-step">
                <h5>Step 5: Setup Character</h5>
                <p>Add to GameObject:</p>
                <ul>
                    <li>AbilityCaster (add ability to Starting Abilities)</li>
                    <li>WrenchInput</li>
                    <li>Animator (optional)</li>
                    <li>AudioSource (optional)</li>
                    <li>TrailRenderer on wrench (optional)</li>
                </ul>
                <p>Create child transform named "WrenchTip" at wrench head position</p>
            </div>

            <div class="workflow-step">
                <h5>Step 6: Wire Input (15 lines)</h5>
                <pre><code>using UnityEngine;
using YAAS;

public class SimpleWrenchInput : MonoBehaviour
{
    private AbilityCaster caster;
    private WrenchInput input;
    public AbilityDef comboAbility;

    void Start()
    {
        caster = GetComponent&lt;AbilityCaster&gt;();
        input = GetComponent&lt;WrenchInput&gt;();
    }

    void Update()
    {
        if (input.attackPressed)
        {
            caster.TryUseAbility(comboAbility);
        }
    }
}</code></pre>
            </div>

            <div class="success-box">
                <strong>‚úÖ Done!</strong> You now have a fully functional 4-hit combo system with auto-chaining, damage scaling, and visual effects!
            </div>
        </section>

        <!-- EXAMPLES -->
        <section id="examples">
            <h2>üìã Usage Examples</h2>

            <h3>Example 1: Charge Attack (Hyperstrike)</h3>

            <pre><code>// 1. Create AttackData for charged attack
Right-click ‚Üí Create ‚Üí Ratchet Combat ‚Üí Attack Data

Hyperstrike.asset:
  Damage: 50
  Duration: 0.8
  Range Multiplier: 1.5
  Hitbox Size: (3, 3, 3)
  Animation Trigger: "Hyperstrike"

// 2. Create ChargeAttackEffect_v2
Right-click ‚Üí Create ‚Üí Ratchet Combat ‚Üí Effects ‚Üí Charge Attack v2

HyperstrikeEffect.asset:
  Charge Time: 1.5
  Charged Attack: [Hyperstrike]
  Minimum Charge Percent: 0.8
  Button To Hold: "hyperstrike"
  Charge Effect Prefab: [GlowEffect]
  Hit Layers: Enemy

// 3. Create AbilityDef
Right-click ‚Üí Create ‚Üí YAAS ‚Üí AbilityDef

HyperstrikeAbility.asset:
  Ability Effects: [HyperstrikeEffect]
  Cooldown: 3.0

// 4. Wire input
if (input.hyperstrikePressed)
{
    caster.TryUseAbility(hyperstrikeAbility);
}</code></pre>

            <h3>Example 2: Ground Pound (AOE)</h3>

            <pre><code>// 1. Create AOEAttackEffect_v2
Right-click ‚Üí Create ‚Üí Ratchet Combat ‚Üí Effects ‚Üí AOE Attack v2

CometStrikeEffect.asset:
  Damage: 40
  Radius: 4
  Shape: Sphere
  Delay: 0
  Impact Effect Prefab: [Explosion]
  Knockback Force: 10
  Knockback Upward Force: 3
  Hit Layers: Enemy

// 2. Create AbilityDef with requirement
Right-click ‚Üí Create ‚Üí YAAS ‚Üí AbilityDef

CometStrikeAbility.asset:
  Ability Effects: [CometStrikeEffect]
  Cooldown: 5.0
  Activation Requirements: [IsInAirRequirement]

// 3. Wire input
if (input.comet_strikePressed)
{
    caster.TryUseAbility(cometStrikeAbility);
}</code></pre>

            <h3>Example 3: Complete Wrench System</h3>

            <div class="info-box">
                <strong>Assets Needed:</strong>
                <ul>
                    <li>4√ó AttackData (Swing1-4)</li>
                    <li>1√ó ComboChain (WrenchBasicCombo)</li>
                    <li>1√ó AttackData (Hyperstrike)</li>
                    <li>1√ó ComboEffect</li>
                    <li>1√ó ChargeAttackEffect_v2</li>
                    <li>1√ó AOEAttackEffect_v2</li>
                    <li>3√ó AbilityDef (Combo, Hyperstrike, CometStrike)</li>
                </ul>
            </div>

            <pre><code>// Complete input handler
using UnityEngine;
using YAAS;

public class WrenchInputHandler : MonoBehaviour
{
    private AbilityCaster caster;
    private WrenchInput input;

    [Header("Abilities")]
    public AbilityDef comboAbility;
    public AbilityDef hyperstrikeAbility;
    public AbilityDef cometStrikeAbility;

    void Start()
    {
        caster = GetComponent&lt;AbilityCaster&gt;();
        input = GetComponent&lt;WrenchInput&gt;();
    }

    void Update()
    {
        // Combo
        if (input.attackPressed)
        {
            caster.TryUseAbility(comboAbility);
        }

        // Hyperstrike
        if (input.hyperstrikePressed)
        {
            caster.TryUseAbility(hyperstrikeAbility);
        }

        // Comet Strike
        if (input.comet_strikePressed)
        {
            caster.TryUseAbility(cometStrikeAbility);
        }
    }
}

// GameObject Setup:
// Ratchet
// ‚îú‚îÄ‚îÄ AbilityCaster (Starting Abilities: all 3 abilities)
// ‚îú‚îÄ‚îÄ RatchetInput
// ‚îú‚îÄ‚îÄ WrenchInput
// ‚îú‚îÄ‚îÄ WrenchInputHandler
// ‚îú‚îÄ‚îÄ Animator
// ‚îú‚îÄ‚îÄ AudioSource
// ‚îî‚îÄ‚îÄ Wrench (child)
//     ‚îú‚îÄ‚îÄ TrailRenderer
//     ‚îî‚îÄ‚îÄ WrenchTip (empty transform at tip)</code></pre>
        </section>

        <!-- API REFERENCE -->
        <section id="api">
            <h2>üìö API Reference</h2>

            <h3>ComboTracker</h3>

            <div class="card">
                <h4>Instance Methods (MonoBehaviour)</h4>

                <pre><code>// Get component
ComboTracker tracker = GetComponent&lt;ComboTracker&gt;();

// Get current combo count
int count = tracker.GetComboCount(string comboKey);

// Get time of last hit
float time = tracker.GetLastHitTime(string comboKey);

// Increment combo
tracker.IncrementCombo(string comboKey);

// Reset combo to 0
tracker.ResetCombo(string comboKey);

// Reset all combos
tracker.ResetAllCombos();

// Check if should auto-reset
bool shouldReset = tracker.ShouldResetCombo(string comboKey, float resetTime);</code></pre>
            </div>

            <div class="card">
                <h4>Static Methods (Backward Compatibility)</h4>

                <pre><code>// Get current combo count
int count = ComboTracker.GetComboCount(AbilityCaster caster, string comboKey);

// Get time of last hit
float time = ComboTracker.GetLastHitTime(AbilityCaster caster, string comboKey);

// Increment combo
ComboTracker.IncrementCombo(AbilityCaster caster, string comboKey);

// Reset combo to 0
ComboTracker.ResetCombo(AbilityCaster caster, string comboKey);

// Reset all combos for a caster
ComboTracker.ResetAllCombos(AbilityCaster caster);

// Check if should auto-reset
bool shouldReset = ComboTracker.ShouldResetCombo(
    AbilityCaster caster,
    string comboKey,
    float resetTime
);</code></pre>

                <div class="info-box">
                    <strong>Note:</strong> Static methods automatically find/create ComboTracker component. No manual cleanup needed!
                </div>
            </div>

            <h3>AttackData</h3>

            <div class="card">
                <h4>Key Properties</h4>

                <table>
                    <tr>
                        <th>Property</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td>damage</td>
                        <td>float</td>
                        <td>Base damage dealt by attack</td>
                    </tr>
                    <tr>
                        <td>attackDuration</td>
                        <td>float</td>
                        <td>Total attack animation duration</td>
                    </tr>
                    <tr>
                        <td>hitboxStartTime</td>
                        <td>float (0-1)</td>
                        <td>When hitbox activates (% of duration)</td>
                    </tr>
                    <tr>
                        <td>hitboxEndTime</td>
                        <td>float (0-1)</td>
                        <td>When hitbox deactivates (% of duration)</td>
                    </tr>
                    <tr>
                        <td>hitboxShape</td>
                        <td>enum</td>
                        <td>Sphere, Box, Capsule, or Cone</td>
                    </tr>
                    <tr>
                        <td>hitboxSize</td>
                        <td>Vector3</td>
                        <td>Size of hitbox (radius or extents)</td>
                    </tr>
                    <tr>
                        <td>animationTrigger</td>
                        <td>string</td>
                        <td>Animator trigger name</td>
                    </tr>
                    <tr>
                        <td>comboWindow</td>
                        <td>float</td>
                        <td>Time to chain into next attack</td>
                    </tr>
                </table>
            </div>

            <h3>ComboChain</h3>

            <div class="card">
                <h4>Public Methods</h4>

                <pre><code>// Get attack at specific index
AttackData attack = comboChain.GetAttack(int comboIndex);

// Get next attack in sequence
AttackData next = comboChain.GetNextAttack(int currentIndex);

// Check if combo can continue
bool canContinue = comboChain.CanContinueCombo(
    int currentIndex,
    float timeSinceLastAttack
);

// Get damage multiplier for combo position
float multiplier = comboChain.GetDamageMultiplier(int comboIndex);

// Get branch attack based on input
AttackData branch = comboChain.GetBranchAttack(
    int currentIndex,
    string input
);</code></pre>
            </div>

            <h3>IDamageable Interface</h3>

            <div class="card">
                <h4>Implementation</h4>

                <pre><code>public interface IDamageable
{
    void TakeDamage(float damage, Vector3 hitPoint, Vector3 attackerPosition);
}

// Example implementation
public class Enemy : MonoBehaviour, IDamageable
{
    public float health = 100f;

    public void TakeDamage(float damage, Vector3 hitPoint, Vector3 attackerPosition)
    {
        health -= damage;

        if (health <= 0)
        {
            Die();
        }
    }
}</code></pre>
            </div>
        </section>

        <!-- DEPENDENCIES -->
        <section>
            <h2>üì¶ Dependencies</h2>

            <table>
                <thead>
                    <tr>
                        <th>Package</th>
                        <th>Status</th>
                        <th>Used By</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>YAAS (Yet Another Ability System)</td>
                        <td><span class="badge badge-required">Required</span></td>
                        <td>All effects</td>
                    </tr>
                    <tr>
                        <td>Unity Physics</td>
                        <td><span class="badge badge-required">Required</span></td>
                        <td>Hitbox detection</td>
                    </tr>
                    <tr>
                        <td>Boso.CoreHealth</td>
                        <td><span class="badge badge-optional">Optional</span></td>
                        <td>CreateMeleeEffect only</td>
                    </tr>
                    <tr>
                        <td>WrenchInput</td>
                        <td><span class="badge badge-optional">Optional</span></td>
                        <td>ChargeAttackEffect_v2 only</td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box">
                <strong>Note:</strong> The v2 effects use the <code>IDamageable</code> interface and have no external health system dependencies.
            </div>
        </section>

        <!-- WEAPON SYSTEM -->
        <section id="weapons">
            <h2>üî´ Weapon System</h2>

            <p class="section-intro">
                Weapons in this system are just <strong>ability containers</strong> - no separate weapon package needed!
                When you equip a weapon, you're just learning/unlearning abilities.
            </p>

            <h3>Core Concept</h3>
            <div class="info-box">
                <p><strong>Weapons = Ability Collections</strong></p>
                <p>A blaster weapon? Just a WeaponData holding a "shoot" ability.</p>
                <p>A bomb glove? Just a WeaponData holding a "throw bomb" ability.</p>
                <p>A wrench? Just a WeaponData holding melee combo abilities.</p>
            </div>

            <h3>WeaponData ScriptableObject</h3>
            <pre><code>Create ‚Üí Ratchet Combat ‚Üí Weapon Data

Required Fields:
  - Weapon ID: Unique identifier
  - Weapon Name: Display name
  - Abilities: Array of AbilityDef assets

Optional Fields:
  - Weapon Icon: UI sprite
  - Weapon Model Prefab: Visual model
  - Attachment Point: "RightHand", "Back", etc.
  - Position/Rotation Offset: Model positioning
  - Current Ammo / Max Ammo: Ammo tracking (-1 = unlimited)
  - Equip Sound / Unequip Sound: Audio
  - Equip Effect: VFX on equip</code></pre>

            <h3>WeaponSwitcher Component</h3>
            <div class="card">
                <p>Add to your character GameObject (requires AbilityCaster)</p>
                <pre><code>WeaponSwitcher Properties:
  - Available Weapons: All weapons player owns
  - Starting Weapon: Weapon equipped on Start()
  - Weapon Parent: Transform for model attachment

Features:
  - Learns/unlearns abilities on weapon switch
  - Spawns/destroys weapon models
  - Plays equip sounds and effects
  - Supports number keys (1-4) and scroll wheel switching
  - Fires events: OnWeaponEquipped, OnWeaponUnequipped, OnWeaponSwitched</code></pre>
            </div>

            <h3>Example: Blaster Weapon</h3>
            <pre><code>// 1. Create ProjectileSpawnerEffect
Create ‚Üí Ratchet Combat ‚Üí Effects ‚Üí Projectile Spawner

BlasterShot.asset:
  Projectile Prefab: [BlasterBoltPrefab]
  Spawn Point Name: "WeaponMuzzle"
  Initial Velocity: 30
  Damage: 15
  Projectile Lifetime: 3

// 2. Create AbilityDef
Create ‚Üí YAAS ‚Üí AbilityDef

BlasterAbility.asset:
  Ability Effects: [BlasterShot]
  Cooldown: 0.2

// 3. Create WeaponData
Create ‚Üí Ratchet Combat ‚Üí Weapon Data

Blaster.asset:
  Weapon ID: "blaster_v1"
  Weapon Name: "Blaster"
  Abilities: [BlasterAbility]
  Weapon Model Prefab: [BlasterModel]
  Attachment Point: "RightHand"
  Current Ammo: 100
  Max Ammo: 100

// 4. Add to WeaponSwitcher
WeaponSwitcher:
  Available Weapons: [Blaster, BombGlove, Wrench]
  Starting Weapon: [Blaster]</code></pre>

            <h3>Example: Bomb Glove</h3>
            <pre><code>// 1. Create ProjectileSpawnerEffect (with arc)
BombThrow.asset:
  Projectile Prefab: [BombPrefab]
  Initial Velocity: 15
  Inherit Caster Velocity: true
  Damage: 50

// 2. Create AbilityDef
BombAbility.asset:
  Ability Effects: [BombThrow]
  Cooldown: 1.0

// 3. Create WeaponData
BombGlove.asset:
  Weapon ID: "bomb_glove"
  Weapon Name: "Bomb Glove"
  Abilities: [BombAbility]
  Current Ammo: 10
  Max Ammo: 20</code></pre>

            <h3>Weapon Switching API</h3>
            <pre><code>// Get reference
WeaponSwitcher switcher = GetComponent&lt;WeaponSwitcher&gt;();

// Switch weapons
switcher.EquipWeapon(weaponData);
switcher.SwitchToWeaponIndex(0);
switcher.CycleWeaponNext();
switcher.CycleWeaponPrevious();

// Query state
WeaponData current = switcher.GetCurrentWeapon();
int index = switcher.GetCurrentWeaponIndex();
bool equipped = switcher.IsWeaponEquipped(weaponData);
WeaponData[] all = switcher.GetAvailableWeapons();

// Events
switcher.OnWeaponEquipped += (weapon) => Debug.Log($"Equipped {weapon.weaponName}");
switcher.OnWeaponSwitched += (oldWeapon, newWeapon) => Debug.Log("Switched");
</code></pre>

            <h3>Projectile Component</h3>
            <div class="card">
                <p>The <code>Projectile</code> component is automatically added by ProjectileSpawnerEffect, or you can add it manually to your projectile prefabs.</p>
                <pre><code>Projectile Properties:
  - Impact Effect: VFX on hit
  - Impact Sound: Audio on hit
  - Destroy On Impact: Auto-destroy on hit (default: true)

Behavior:
  - Moves with physics or manual velocity
  - Damages IDamageable targets
  - Ignores shooter
  - Auto-destroys after lifetime</code></pre>
            </div>

            <div class="success-box">
                <strong>‚úÖ Benefits:</strong> No weapon management package needed. Weapons are just data. All behavior comes from abilities. Switch weapons = swap ability sets.
            </div>
        </section>

        <!-- TROUBLESHOOTING -->
        <section>
            <h2>üîß Troubleshooting</h2>

            <h3>Hitbox Not Connecting</h3>
            <div class="card">
                <p><strong>Problem:</strong> Attacks not dealing damage</p>
                <p><strong>Solutions:</strong></p>
                <ul>
                    <li>‚úì Check enemy has <code>IDamageable</code> interface</li>
                    <li>‚úì Verify enemy layer matches Hit Layers mask</li>
                    <li>‚úì Ensure spawn point exists ("WrenchTip")</li>
                    <li>‚úì Check AttackData hitbox size is reasonable</li>
                    <li>‚úì Verify hitbox timing (startTime/endTime)</li>
                </ul>
            </div>

            <h3>Combo Not Chaining</h3>
            <div class="card">
                <p><strong>Problem:</strong> Combo resets instead of chaining</p>
                <p><strong>Solutions:</strong></p>
                <ul>
                    <li>‚úì Increase Global Combo Window time</li>
                    <li>‚úì Check ComboChain is assigned to ComboEffect</li>
                    <li>‚úì Verify input is triggering within window</li>
                    <li>‚úì Debug log <code>ComboTracker.GetComboCount()</code></li>
                </ul>
            </div>

            <h3>Charge Attack Not Working</h3>
            <div class="card">
                <p><strong>Problem:</strong> Charge attack not releasing</p>
                <p><strong>Solutions:</strong></p>
                <ul>
                    <li>‚úì Ensure WrenchInput component exists</li>
                    <li>‚úì Check "Button To Hold" setting matches input</li>
                    <li>‚úì Verify Minimum Charge Percent is reached</li>
                    <li>‚úì Confirm input is being held long enough</li>
                </ul>
            </div>

            <h3>Memory Leaks</h3>
            <div class="card">
                <p><strong>Problem:</strong> Memory usage growing over time</p>
                <p><strong>Solution:</strong></p>
                <pre><code>void OnDestroy()
{
    // Cleanup combo tracker
    ComboTracker.CleanupCaster(GetComponent&lt;AbilityCaster&gt;());
}</code></pre>
            </div>
        </section>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2024 Combat Ability Package. Built for YAAS (Yet Another Ability System).</p>
            <p>Pure Effects. Zero Coupling. Maximum Flexibility.</p>
        </div>
    </footer>
</body>
</html>
